<div class="report-page-wrapper min-h-screen py-12 px-4 relative overflow-hidden">
    
    <div class="scenic-bg">
        <div class="hill hill-1"></div>
        <div class="bullet-train-container">
            <div class="bullet-train">
                <div class="train-head"></div>
                <div class="speed-lines"></div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto main-wrapper relative z-10">

        <div class="flex items-center justify-between mb-8">
            <div>
                <h1 class="text-3xl font-black text-slate-900 tracking-tight drop-shadow-sm">Reservation Report (JOIN)</h1>
                <p class="text-sm text-slate-600 mt-1 font-medium">Data analytics and relational mapping</p>
            </div>
            <a href="/home" data-link class="px-4 py-2 rounded-lg bg-white/40 hover:bg-white/60 text-sm font-bold text-slate-700 transition flex items-center gap-2 border border-slate-200 shadow-sm">
                <i class="fa-solid fa-arrow-left"></i> Back to Home
            </a>
        </div>

        <div class="bg-blue-600/10 border border-blue-200/50 backdrop-blur-md rounded-2xl p-6 mb-8 text-sm text-slate-700 shadow-lg shadow-blue-900/5">
            <p class="font-bold text-blue-700 mb-2 flex items-center gap-2">
                <i class="fa-solid fa-circle-info"></i> What is this report?
            </p>
            <p class="mb-3">
                This view is <strong>not stored</strong> in the database. It is generated dynamically by <strong>combining data from three separate tables</strong> using relational logic.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-4">
                <div class="bg-white/40 p-3 rounded-lg border border-white/60">
                    <strong class="text-blue-700">Trains</strong><br>Identifying the vehicle
                </div>
                <div class="bg-white/40 p-3 rounded-lg border border-white/60">
                    <strong class="text-blue-700">Bookings</strong><br>Passenger details
                </div>
                <div class="bg-white/40 p-3 rounded-lg border border-white/60">
                    <strong class="text-blue-700">Reservations</strong><br>The logical link
                </div>
            </div>
        </div>

        <div class="table-card p-6 rounded-2xl border border-white/80 bg-white/40 backdrop-blur-md shadow-lg shadow-blue-900/5">
            <h2 class="font-bold mb-4 text-lg text-slate-800">Trains â†” Bookings (Joined View)</h2>

            <div id="loadingSpinner" class="text-center py-8">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
                <p class="text-slate-500 text-sm mt-2 font-medium">Joining tables...</p>
            </div>

            <div id="reportTableContainer" class="hidden overflow-x-auto rounded-xl border border-slate-200 bg-white/30">
                <table class="min-w-full text-left">
                    <thead>
                        <tr class="bg-slate-50/50">
                            <th class="px-4 py-3 font-bold text-blue-600 uppercase text-xs">Reservation ID</th>
                            <th class="px-4 py-3 font-bold text-blue-600 uppercase text-xs">Train</th>
                            <th class="px-4 py-3 font-bold text-blue-600 uppercase text-xs">Booking</th>
                            <th class="px-4 py-3 font-bold text-blue-600 uppercase text-xs">Reserved On</th>
                        </tr>
                    </thead>
                    <tbody id="reportTableBody" class="divide-y divide-slate-100 text-slate-700"></tbody>
                </table>

                <p id="noRows" class="text-center text-slate-500 py-8 hidden font-medium">
                    No joined rows found. Create a reservation first.
                </p>

                <div class="mt-6 border-t border-slate-200 bg-slate-900/5 px-6 py-6">
                    <div class="flex items-center justify-between mb-3">
                        <p class="font-bold text-sm text-slate-800 flex items-center gap-2">
                            <i class="fa-solid fa-code text-blue-600"></i> SQL Logic (INNER JOIN)
                        </p>
                        <span class="px-2 py-1 bg-blue-100 text-blue-600 text-[10px] font-black uppercase rounded">System View</span>
                    </div>

                    <pre class="bg-slate-900 text-blue-300 px-4 py-4 rounded-lg text-xs overflow-x-auto leading-relaxed shadow-inner">
SELECT
    r.id AS reservation_id,
    t.train_name AS train_name,
    b.passenger AS booking_passenger_name,
    r.reserved_on
FROM reservations r
JOIN trains t ON r.train_id = t.id
JOIN bookings b ON r.booking_id = b.id;</pre>

                    <div class="mt-4 text-[11px] text-slate-500 italic flex items-center gap-2">
                        <i class="fa-solid fa-database"></i>
                        Note: This data structure ensures zero redundancy (Normalization).
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="alertContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>
</div>

<style>
    /* Global Background Theme */
    .report-page-wrapper {
        background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
        background-attachment: fixed;
    }

    .scenic-bg {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60vh;
        z-index: 0;
        pointer-events: none;
    }

    .hill {
        position: absolute;
        bottom: 0;
        width: 200%;
        height: 100%;
        background-repeat: repeat-x;
        opacity: 0.5;
    }

    .hill-1 {
        background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%237dd3fc" d="M0,160L80,176C160,192,320,224,480,213.3C640,203,800,149,960,144C1120,139,1280,181,1360,202.7L1440,224L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"></path></svg>');
        animation: moveHill 60s linear infinite;
        bottom: -50px;
    }

    .bullet-train-container {
        position: absolute;
        bottom: 120px;
        width: 100%;
        height: 2px;
        background: rgba(15, 23, 42, 0.05);
    }

    .bullet-train {
        position: absolute;
        top: -15px;
        left: -500px;
        display: flex;
        align-items: center;
        animation: highSpeedPass 12s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
    }

    .train-head {
        width: 70px;
        height: 20px;
        background: #0369a1;
        border-radius: 50% 12px 3px 3px;
    }

    .speed-lines {
        width: 120px;
        height: 15px;
        background: linear-gradient(90deg, transparent, rgba(3, 105, 161, 0.3));
        margin-left: -5px;
    }

    @keyframes moveHill {
        from { transform: translateX(0); }
        to { transform: translateX(-50%); }
    }

    @keyframes highSpeedPass {
        0% { transform: translateX(-100%); }
        30%, 100% { transform: translateX(200vw); }
    }

    #reportTableBody tr:hover {
        background: rgba(255, 255, 255, 0.6);
    }
</style>
